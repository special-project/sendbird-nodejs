"use strict";

var rp = require("request-promise");

var DEFAULT_BASE_URL = "https://api.sendbird.com/v3/";

// users
var usersService = require("./services/users");
// open channel
var openChannelsService = require("./services/openChannels");
// group channel
var groupChannelsService = require("./services/groupChannels");
// applications
var applicationsService = require("./services/applications");

function SendBird(apiToken) {
  var baseUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_BASE_URL;

  if (!apiToken) {
    throw new Error("Invalid api token");
  }
  var request = rp.defaults({
    baseUrl: baseUrl,
    headers: {
      "Api-Token": apiToken
    },
    json: true
  });

  var api = {};

  api.users = usersService(request);
  api.openChannels = openChannelsService(request);
  api.groupChannels = groupChannelsService(request);
  api.applications = applicationsService(request);

  return api;
}

module.exports = SendBird;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9TZW5kQmlyZC5qcyJdLCJuYW1lcyI6WyJycCIsInJlcXVpcmUiLCJERUZBVUxUX0JBU0VfVVJMIiwidXNlcnNTZXJ2aWNlIiwib3BlbkNoYW5uZWxzU2VydmljZSIsImdyb3VwQ2hhbm5lbHNTZXJ2aWNlIiwiYXBwbGljYXRpb25zU2VydmljZSIsIlNlbmRCaXJkIiwiYXBpVG9rZW4iLCJiYXNlVXJsIiwiRXJyb3IiLCJyZXF1ZXN0IiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwianNvbiIsImFwaSIsInVzZXJzIiwib3BlbkNoYW5uZWxzIiwiZ3JvdXBDaGFubmVscyIsImFwcGxpY2F0aW9ucyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLEtBQUtDLFFBQVEsaUJBQVIsQ0FBWDs7QUFFQSxJQUFNQyxtQkFBbUIsOEJBQXpCOztBQUVBO0FBQ0EsSUFBTUMsZUFBZUYsUUFBUSxrQkFBUixDQUFyQjtBQUNBO0FBQ0EsSUFBTUcsc0JBQXNCSCxRQUFRLHlCQUFSLENBQTVCO0FBQ0E7QUFDQSxJQUFNSSx1QkFBdUJKLFFBQVEsMEJBQVIsQ0FBN0I7QUFDQTtBQUNBLElBQU1LLHNCQUFzQkwsUUFBUSx5QkFBUixDQUE1Qjs7QUFFQSxTQUFTTSxRQUFULENBQWtCQyxRQUFsQixFQUF3RDtBQUFBLE1BQTVCQyxPQUE0Qix1RUFBbEJQLGdCQUFrQjs7QUFDdEQsTUFBSSxDQUFDTSxRQUFMLEVBQWU7QUFDYixVQUFNLElBQUlFLEtBQUosQ0FBVSxtQkFBVixDQUFOO0FBQ0Q7QUFDRCxNQUFNQyxVQUFVWCxHQUFHWSxRQUFILENBQVk7QUFDMUJILG9CQUQwQjtBQUUxQkksYUFBUztBQUNQLG1CQUFhTDtBQUROLEtBRmlCO0FBSzFCTSxVQUFNO0FBTG9CLEdBQVosQ0FBaEI7O0FBUUEsTUFBTUMsTUFBTSxFQUFaOztBQUVBQSxNQUFJQyxLQUFKLEdBQVliLGFBQWFRLE9BQWIsQ0FBWjtBQUNBSSxNQUFJRSxZQUFKLEdBQW1CYixvQkFBb0JPLE9BQXBCLENBQW5CO0FBQ0FJLE1BQUlHLGFBQUosR0FBb0JiLHFCQUFxQk0sT0FBckIsQ0FBcEI7QUFDQUksTUFBSUksWUFBSixHQUFtQmIsb0JBQW9CSyxPQUFwQixDQUFuQjs7QUFFQSxTQUFPSSxHQUFQO0FBQ0Q7O0FBRURLLE9BQU9DLE9BQVAsR0FBaUJkLFFBQWpCIiwiZmlsZSI6IlNlbmRCaXJkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IHJwID0gcmVxdWlyZShcInJlcXVlc3QtcHJvbWlzZVwiKTtcblxuY29uc3QgREVGQVVMVF9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9hcGkuc2VuZGJpcmQuY29tL3YzL1wiO1xuXG4vLyB1c2Vyc1xuY29uc3QgdXNlcnNTZXJ2aWNlID0gcmVxdWlyZShcIi4vc2VydmljZXMvdXNlcnNcIik7XG4vLyBvcGVuIGNoYW5uZWxcbmNvbnN0IG9wZW5DaGFubmVsc1NlcnZpY2UgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9vcGVuQ2hhbm5lbHNcIik7XG4vLyBncm91cCBjaGFubmVsXG5jb25zdCBncm91cENoYW5uZWxzU2VydmljZSA9IHJlcXVpcmUoXCIuL3NlcnZpY2VzL2dyb3VwQ2hhbm5lbHNcIik7XG4vLyBhcHBsaWNhdGlvbnNcbmNvbnN0IGFwcGxpY2F0aW9uc1NlcnZpY2UgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9hcHBsaWNhdGlvbnNcIik7XG5cbmZ1bmN0aW9uIFNlbmRCaXJkKGFwaVRva2VuLCBiYXNlVXJsID0gREVGQVVMVF9CQVNFX1VSTCkge1xuICBpZiAoIWFwaVRva2VuKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcGkgdG9rZW5cIik7XG4gIH1cbiAgY29uc3QgcmVxdWVzdCA9IHJwLmRlZmF1bHRzKHtcbiAgICBiYXNlVXJsLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQXBpLVRva2VuXCI6IGFwaVRva2VuLFxuICAgIH0sXG4gICAganNvbjogdHJ1ZSxcbiAgfSk7XG5cbiAgY29uc3QgYXBpID0ge307XG5cbiAgYXBpLnVzZXJzID0gdXNlcnNTZXJ2aWNlKHJlcXVlc3QpO1xuICBhcGkub3BlbkNoYW5uZWxzID0gb3BlbkNoYW5uZWxzU2VydmljZShyZXF1ZXN0KTtcbiAgYXBpLmdyb3VwQ2hhbm5lbHMgPSBncm91cENoYW5uZWxzU2VydmljZShyZXF1ZXN0KTtcbiAgYXBpLmFwcGxpY2F0aW9ucyA9IGFwcGxpY2F0aW9uc1NlcnZpY2UocmVxdWVzdCk7XG5cbiAgcmV0dXJuIGFwaTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTZW5kQmlyZDtcbiJdfQ==